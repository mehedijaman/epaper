import{d as j,x as y,I as z,z as L,o as m,c as _,e as l,f as o,h as F,w as i,a as s,K as p,F as S,L as B,j as M,J as g,k as $,R as O,S as R}from"./app-BIDwooZD.js";import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-Dl_-9lDx.js";import{_ as P}from"./index-Y7wIGGvX.js";import{_ as H}from"./index-C8P2q1AW.js";import{_ as U,c as T,a as J,b as K}from"./CardTitle.vue_vue_type_script_setup_true_lang-ChP2b989.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-D212_zZz.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-B1SXL9YZ.js";import{_ as G,a as Q,b as W,c as X,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-CtmDDGDY.js";import{_ as Y}from"./EpAdminLayout.vue_vue_type_script_setup_true_lang-C7XcxSU8.js";import"./Primitive-BLKkOots.js";import"./useForwardPropsEmits-ljZNR3_O.js";import"./VisuallyHidden-Cp8joezf.js";import"./ohash.D__AXeF1-C-E83dC9.js";import"./useFormControl-DzJJrvcL.js";import"./RovingFocusGroup-CSddD9ru.js";import"./VisuallyHiddenInput-BFvPXTR-.js";import"./check-BMDuJIhl.js";import"./createLucideIcon-ccUrNrU9.js";import"./chevron-right-CAogZLbH.js";import"./index-CR_w27Kk.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-C9ceEc2p.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DSMqO86V.js";import"./newspaper-BTZbB5ry.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-rq6uf0wM.js";const Z={class:"mx-auto w-full max-w-7xl space-y-5 p-4 sm:p-6"},ee={class:"grid gap-4 md:grid-cols-2 xl:grid-cols-3"},te={class:"flex flex-wrap items-center justify-between gap-2"},ae={key:0,class:"text-xs text-muted-foreground"},se={class:"space-y-2"},le={key:0,class:"space-y-3"},oe={class:"space-y-2"},ne={class:"space-y-2"},ie={key:0,class:"space-y-2"},de={class:"overflow-hidden rounded-md border border-border/70 bg-muted/30 p-2"},re=["src"],me={key:1,class:"space-y-2"},ue=["onUpdate:modelValue"],ce={class:"space-y-2"},_e={class:"grid gap-2"},pe={class:"flex items-center justify-between rounded-md border border-border/70 bg-muted/20 px-3 py-2"},fe={class:"flex items-center gap-2"},ge={class:"text-sm"},Oe=j({__name:"Index",props:{slots:{}},setup(A){const w=A,C=[{title:"Ads",href:"/admin/ads"}],c=y(null),b=y(null),x=y(w.slots.map(V)),d=z({type:"image",image_url:null,click_url:null,embed_code:null,is_active:!0,starts_at:null,ends_at:null});L(()=>w.slots,e=>{x.value=e.map(V)});function V(e){return{slot_no:e.slot_no,title:e.title,type:e.ad.type,image_url:e.ad.image_url??"",click_url:e.ad.click_url??"",embed_code:e.ad.embed_code??"",is_active:e.ad.is_active,starts_at:k(e.ad.starts_at),ends_at:k(e.ad.ends_at)}}function k(e){if(e===null||e==="")return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset()*6e4;return new Date(t.getTime()-a).toISOString().slice(0,16)}function f(e){const t=e.trim();return t===""?null:t}function I(e){c.value=e.slot_no,b.value=e.slot_no,d.clearErrors(),d.type=e.type,d.image_url=e.type==="image"?f(e.image_url):null,d.click_url=e.type==="image"?f(e.click_url):null,d.embed_code=e.type==="embed"?f(e.embed_code):null,d.is_active=e.is_active,d.starts_at=f(e.starts_at),d.ends_at=f(e.ends_at),d.put(`/admin/ads/${e.slot_no}`,{preserveScroll:!0,onSuccess:()=>{c.value=null,b.value=null},onError:()=>{c.value=null},onFinish:()=>{c.value===e.slot_no&&(c.value=null)}})}function D(e,t){e.is_active=t===!0}function E(e,t){D(e,t)}function r(e,t){if(b.value===t)return d.errors[e]}function h(e){return d.processing&&c.value===e}return(e,t)=>(m(),_(S,null,[l(o(F),{title:"Ads"}),l(Y,{breadcrumbs:C},{default:i(()=>[s("div",Z,[t[11]||(t[11]=s("div",{class:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between"},[s("div",{class:"space-y-1"},[s("h1",{class:"text-2xl font-semibold tracking-tight"},"Ads Management"),s("p",{class:"text-sm text-muted-foreground"}," Configure ad content, status, and schedule for each slot. ")]),s("p",{class:"text-xs text-muted-foreground"}," Each slot saves independently. ")],-1)),l(o(U),{class:"border-border/70"},{default:i(()=>[l(o(T),{class:"grid gap-2 pt-6 text-sm text-muted-foreground sm:grid-cols-3"},{default:i(()=>[s("p",null,"Total slots: "+p(x.value.length),1),t[0]||(t[0]=s("p",null,"Supported content: image or embed code",-1)),t[1]||(t[1]=s("p",null,"Use active window to schedule visibility",-1))]),_:1})]),_:1}),s("div",ee,[(m(!0),_(S,null,B(x.value,a=>(m(),M(o(U),{key:a.slot_no,class:"border-border/70 shadow-sm"},{default:i(()=>[l(o(J),{class:"pb-3"},{default:i(()=>[s("div",te,[l(o(K),{class:"text-base"},{default:i(()=>[g("Slot "+p(a.slot_no),1)]),_:2},1024),l(o(P),{variant:a.is_active?"default":"secondary"},{default:i(()=>[g(p(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),a.title?(m(),_("p",ae,p(a.title),1)):$("",!0)]),_:2},1024),l(o(T),{class:"space-y-4"},{default:i(()=>[s("div",se,[t[4]||(t[4]=s("label",{class:"text-sm font-medium"},"Type",-1)),l(o(G),{modelValue:a.type,"onUpdate:modelValue":n=>a.type=n},{default:i(()=>[l(o(Q),null,{default:i(()=>[l(o(W),{placeholder:"Select type"})]),_:1}),l(o(X),null,{default:i(()=>[l(o(N),{value:"image"},{default:i(()=>[...t[2]||(t[2]=[g("Image",-1)])]),_:1}),l(o(N),{value:"embed"},{default:i(()=>[...t[3]||(t[3]=[g("Embed",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"]),l(u,{message:r("type",a.slot_no)},null,8,["message"])]),a.type==="image"?(m(),_("div",le,[s("div",oe,[t[5]||(t[5]=s("label",{class:"text-sm font-medium"},"Image URL",-1)),l(o(v),{modelValue:a.image_url,"onUpdate:modelValue":n=>a.image_url=n,placeholder:"https://example.com/banner.jpg"},null,8,["modelValue","onUpdate:modelValue"]),l(u,{message:r("image_url",a.slot_no)},null,8,["message"])]),s("div",ne,[t[6]||(t[6]=s("label",{class:"text-sm font-medium"},"Click URL (optional)",-1)),l(o(v),{modelValue:a.click_url,"onUpdate:modelValue":n=>a.click_url=n,placeholder:"https://example.com/landing-page"},null,8,["modelValue","onUpdate:modelValue"]),l(u,{message:r("click_url",a.slot_no)},null,8,["message"])]),a.image_url.trim()!==""?(m(),_("div",ie,[t[7]||(t[7]=s("p",{class:"text-xs font-medium text-muted-foreground"},"Preview",-1)),s("div",de,[s("img",{src:a.image_url,alt:"Ad preview",class:"max-h-28 w-auto rounded object-contain",loading:"lazy"},null,8,re)])])):$("",!0)])):(m(),_("div",me,[t[8]||(t[8]=s("label",{class:"text-sm font-medium"},"Embed Code",-1)),O(s("textarea",{"onUpdate:modelValue":n=>a.embed_code=n,rows:"4",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"Paste embed HTML"},null,8,ue),[[R,a.embed_code]]),l(u,{message:r("embed_code",a.slot_no)},null,8,["message"])])),s("div",ce,[t[9]||(t[9]=s("label",{class:"text-sm font-medium"},"Active window (optional)",-1)),s("div",_e,[l(o(v),{modelValue:a.starts_at,"onUpdate:modelValue":n=>a.starts_at=n,type:"datetime-local"},null,8,["modelValue","onUpdate:modelValue"]),l(o(v),{modelValue:a.ends_at,"onUpdate:modelValue":n=>a.ends_at=n,type:"datetime-local"},null,8,["modelValue","onUpdate:modelValue"])]),l(u,{message:r("starts_at",a.slot_no)},null,8,["message"]),l(u,{message:r("ends_at",a.slot_no)},null,8,["message"])]),s("div",pe,[t[10]||(t[10]=s("div",null,[s("p",{class:"text-sm font-medium"},"Slot status"),s("p",{class:"text-xs text-muted-foreground"},"Toggle visibility for this slot.")],-1)),s("div",fe,[l(o(q),{checked:a.is_active,"onUpdate:checked":n=>E(a,n)},null,8,["checked","onUpdate:checked"]),s("span",ge,p(a.is_active?"Active":"Inactive"),1)])]),l(u,{message:r("is_active",a.slot_no)},null,8,["message"]),l(o(H),{class:"w-full",disabled:h(a.slot_no),onClick:n=>I(a)},{default:i(()=>[g(p(h(a.slot_no)?"Saving...":`Save Slot ${a.slot_no}`),1)]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])])]),_:1})],64))}});export{Oe as default};
