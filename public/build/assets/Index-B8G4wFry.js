import{d as oe,x as c,I as te,z as j,Q as se,o as m,c as x,e as l,f as s,h as re,w as a,a as r,J as b,K as T,n as p,l as U,G as le,k as y,j as z,R,S as B,F as ne,p as L}from"./app-BIDwooZD.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-Dl_-9lDx.js";import{_ as h}from"./index-C8P2q1AW.js";import{_ as V,a as P,b as I,c as M}from"./CardTitle.vue_vue_type_script_setup_true_lang-ChP2b989.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-B1SXL9YZ.js";import{_ as ie}from"./EpAdminLayout.vue_vue_type_script_setup_true_lang-C7XcxSU8.js";import"./Primitive-BLKkOots.js";import"./index-CR_w27Kk.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-C9ceEc2p.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DSMqO86V.js";import"./useForwardPropsEmits-ljZNR3_O.js";import"./chevron-right-CAogZLbH.js";import"./VisuallyHidden-Cp8joezf.js";import"./createLucideIcon-ccUrNrU9.js";import"./RovingFocusGroup-CSddD9ru.js";import"./newspaper-BTZbB5ry.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-rq6uf0wM.js";const ue={class:"mx-auto w-full max-w-6xl space-y-5 p-4 sm:p-6"},de={class:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"},ce={class:"grid gap-4 xl:grid-cols-[minmax(0,360px)_minmax(0,1fr)]"},me=["onKeydown"],pe={key:0,class:"mt-2 text-xs text-slate-700"},ge={key:0,class:"space-y-2"},fe={class:"rounded-lg border border-border/70 bg-muted/40 p-3"},ve=["src"],_e={class:"flex flex-wrap justify-end gap-2"},be={class:"space-y-2"},xe={class:"space-y-2"},ye={class:"space-y-2"},we=5*1024*1024,Ne=oe({__name:"Index",props:{settings:{},logo_url:{}},setup(N){const g=N,F=[{title:"Site Settings",href:"/admin/settings"}],f=c(0),k=c(null),i=c(null),d=c(null),v=c(g.logo_url),_=c(!1),u=c(""),$=new Set(["image/jpeg","image/png","image/webp","image/svg+xml"]),G=[".jpg",".jpeg",".png",".webp",".svg"],o=te({logo:null,remove_logo:!1,footer_editor_info:g.settings.footer_editor_info,footer_contact_info:g.settings.footer_contact_info,footer_copyright:g.settings.footer_copyright}),D=L(()=>d.value??v.value),K=L(()=>u.value!==""?u.value:o.errors.logo),C=L(()=>v.value!==null&&v.value!=="");j(()=>g.logo_url,t=>{v.value=t}),j(i,t=>{d.value!==null&&(URL.revokeObjectURL(d.value),d.value=null),t!==null&&(d.value=URL.createObjectURL(t))}),se(()=>{d.value!==null&&URL.revokeObjectURL(d.value)});function O(t){const e=t.name.toLowerCase(),n=G.some(ee=>e.endsWith(ee)),Z=t.type!==""&&$.has(t.type);return!n&&!Z?"Only JPG, PNG, WEBP, or SVG files are allowed.":t.size>we?"Logo size must be 5MB or less.":null}function E(t){if(u.value="",o.remove_logo=!1,t===null){i.value=null,o.logo=null;return}const e=O(t);if(e!==null){u.value=e,i.value=null,o.logo=null,f.value+=1;return}i.value=t,o.logo=t,o.clearErrors("logo")}function A(t){const n=t.target?.files?.[0]??null;E(n)}function S(){k.value?.click()}function J(){_.value=!0}function W(t){_.value=!0,t.dataTransfer!==null&&(t.dataTransfer.dropEffect="copy")}function H(t){const e=t.currentTarget,n=t.relatedTarget;e instanceof HTMLElement&&n instanceof Node&&e.contains(n)||(_.value=!1)}function Q(t){_.value=!1;const e=t.dataTransfer?.files?.[0]??null;E(e)}function q(){u.value="",i.value=null,o.logo=null,o.remove_logo=!1,f.value+=1}function X(){u.value===""&&(o.remove_logo=!1,o.put("/admin/settings",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{o.reset("logo","remove_logo"),i.value=null,u.value="",f.value+=1}}))}function Y(){C.value&&window.confirm("Remove current logo?")&&(u.value="",i.value=null,o.logo=null,o.remove_logo=!0,o.put("/admin/settings",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{v.value=null,o.reset("logo","remove_logo"),f.value+=1}}))}return(t,e)=>(m(),x(ne,null,[l(s(re),{title:"Site Settings"}),l(ie,{breadcrumbs:F},{default:a(()=>[r("div",ue,[r("div",de,[e[3]||(e[3]=r("div",{class:"space-y-1"},[r("h1",{class:"text-2xl font-semibold tracking-tight"},"Site Settings"),r("p",{class:"text-sm text-muted-foreground"}," Manage brand identity and footer metadata used across the public ePaper views. ")],-1)),l(s(h),{disabled:s(o).processing||u.value!=="",onClick:X},{default:a(()=>[b(T(s(o).processing?"Saving...":"Save Settings"),1)]),_:1},8,["disabled"])]),r("div",ce,[l(s(V),{class:"border-border/70"},{default:a(()=>[l(s(P),{class:"pb-2"},{default:a(()=>[l(s(I),null,{default:a(()=>[...e[4]||(e[4]=[b("Branding",-1)])]),_:1})]),_:1}),l(s(M),{class:"space-y-4"},{default:a(()=>[(m(),x("input",{key:f.value,ref_key:"logoInputRef",ref:k,type:"file",accept:".jpg,.jpeg,.png,.webp,.svg,image/jpeg,image/png,image/webp,image/svg+xml",class:"sr-only",onChange:A},null,32)),r("div",{role:"button",tabindex:"0",class:le(["rounded-xl border-2 border-dashed p-5 text-center transition-colors",_.value?"border-primary bg-primary/5":"border-slate-300 bg-slate-50/80 hover:border-primary/70 hover:bg-primary/5"]),onClick:S,onKeydown:[U(p(S,["prevent"]),["enter"]),U(p(S,["prevent"]),["space"])],onDragenter:p(J,["prevent"]),onDragover:p(W,["prevent"]),onDragleave:p(H,["prevent"]),onDrop:p(Q,["prevent"])},[e[5]||(e[5]=r("p",{class:"text-sm font-medium"},"Drop logo here or click to browse",-1)),e[6]||(e[6]=r("p",{class:"mt-1 text-xs text-muted-foreground"}," Supported: SVG, JPG, PNG, WEBP (max 5MB) ",-1)),i.value?(m(),x("p",pe," Selected: "+T(i.value.name),1)):y("",!0)],42,me),l(w,{message:K.value},null,8,["message"]),D.value?(m(),x("div",ge,[e[7]||(e[7]=r("p",{class:"text-sm font-medium"},"Logo Preview",-1)),r("div",fe,[r("img",{src:D.value,alt:"Site logo",class:"max-h-24 w-auto object-contain"},null,8,ve)])])):y("",!0),r("div",_e,[i.value!==null?(m(),z(s(h),{key:0,variant:"ghost",size:"sm",onClick:q},{default:a(()=>[...e[8]||(e[8]=[b(" Remove selected file ",-1)])]),_:1})):y("",!0),C.value?(m(),z(s(h),{key:1,variant:"destructive",size:"sm",disabled:s(o).processing,onClick:Y},{default:a(()=>[...e[9]||(e[9]=[b(" Remove logo ",-1)])]),_:1},8,["disabled"])):y("",!0)])]),_:1})]),_:1}),l(s(V),{class:"border-border/70"},{default:a(()=>[l(s(P),{class:"pb-2"},{default:a(()=>[l(s(I),null,{default:a(()=>[...e[10]||(e[10]=[b("Footer Information",-1)])]),_:1})]),_:1}),l(s(M),{class:"space-y-5"},{default:a(()=>[r("div",be,[e[11]||(e[11]=r("label",{class:"text-sm font-medium"},"Editor Info",-1)),R(r("textarea",{"onUpdate:modelValue":e[0]||(e[0]=n=>s(o).footer_editor_info=n),rows:"4",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"Editorial information shown in the public footer"},null,512),[[B,s(o).footer_editor_info]]),l(w,{message:s(o).errors.footer_editor_info},null,8,["message"])]),r("div",xe,[e[12]||(e[12]=r("label",{class:"text-sm font-medium"},"Contact Info",-1)),R(r("textarea",{"onUpdate:modelValue":e[1]||(e[1]=n=>s(o).footer_contact_info=n),rows:"4",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:outline-none",placeholder:"Contact addresses, phone, email, website"},null,512),[[B,s(o).footer_contact_info]]),l(w,{message:s(o).errors.footer_contact_info},null,8,["message"])]),r("div",ye,[e[13]||(e[13]=r("label",{class:"text-sm font-medium"},"Copyright",-1)),l(s(ae),{modelValue:s(o).footer_copyright,"onUpdate:modelValue":e[2]||(e[2]=n=>s(o).footer_copyright=n),placeholder:"e.g. Copyright The Daily Newspaper Â©2026"},null,8,["modelValue"]),l(w,{message:s(o).errors.footer_copyright},null,8,["message"])])]),_:1})]),_:1})])])]),_:1})],64))}});export{Ne as default};
