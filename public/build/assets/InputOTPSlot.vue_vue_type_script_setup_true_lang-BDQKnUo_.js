import{a as Y,u as he}from"./useForwardPropsEmits-vmL0mnr1.js";import{d as W,as as ye,az as be,aA as Se,A as ae,aB as we,aC as A,C as oe,z as le,U as xe,E as N,aD as Pe,o as V,c as G,j as se,f as b,k as re,a as L,r as J,m as K,G as Be,O as _e,F as ke,av as ne,p as I,aE as F,aF as Ce,v as Ee,x as z,H as Z,w as Te,Y as Ae,Z as Me,J as De,K as Re}from"./app-pbFrJQ1g.js";const Fe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,Ie=W({props:{fallback:{type:String,required:!0}},setup(s){return()=>Ee("noscript",{innerHTML:`<style>${s.fallback}</style>`})}}),ie=Symbol("vue-otp-context");function Ve(s){return[setTimeout(s,0),setTimeout(s,10),setTimeout(s,50)]}const Oe=18,ue=40,We=`${ue}px`,$e=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function je({containerRef:s,inputRef:p,pushPasswordManagerStrategy:u,isFocused:n}){const i=z({done:!1,refocused:!1}),o=z(!1),h=z(!1),c=z(!1),x=I(()=>u==="none"?!1:(u==="increase-width"||u==="experimental-no-flickering")&&o.value&&h.value),y=()=>{const l=s.value,v=p.value;if(!l||!v||c.value||u==="none")return;const P=l,B=P.getBoundingClientRect().left+P.offsetWidth,S=P.getBoundingClientRect().top+P.offsetHeight/2,_=B-Oe,O=S;if(!(document.querySelectorAll($e).length===0&&document.elementFromPoint(_,O)===l)&&(o.value=!0,c.value=!0,!i.value.refocused&&document.activeElement===v)){const M=[v.selectionStart,v.selectionEnd];v.blur(),v.focus(),v.setSelectionRange(M[0],M[1]),i.value.refocused=!0}},d=()=>{const l=s.value;!l||u==="none"||(h.value=window.innerWidth-l.getBoundingClientRect().right>=ue)};let m;return ae(()=>{d(),m=setInterval(d,1e3)}),oe(()=>{clearInterval(m)}),le([n,p],(l,v,P)=>{const[B,S]=l,_=B||document.activeElement===S;if(u==="none"||!_)return;const O=setTimeout(y,0),M=setTimeout(y,2e3),q=setTimeout(y,5e3),U=setTimeout(()=>{c.value=!0},6e3);P(()=>{clearTimeout(O),clearTimeout(M),clearTimeout(q),clearTimeout(U)})}),{hasPWMBadge:o,willPushPWMBadge:x,PWM_BADGE_SPACE_WIDTH:We}}const He={style:{position:"absolute",inset:"0","pointer-events":"none"}},ze=["value","data-input-otp-placeholder-shown","data-input-otp-mss","data-input-otp-mse","aria-placeholder","pattern"],Le=W({name:"OTPInput",inheritAttrs:!1,__name:"OTPInput",props:ne({maxlength:{},textAlign:{default:"left"},inputmode:{default:"numeric"},containerClass:{},pushPasswordManagerStrategy:{default:"increase-width"},noScriptCssFallback:{default:Fe},defaultValue:{default:""},pasteTransformer:{},accept:{},alt:{},autocomplete:{default:"one-time-code"},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{}},{modelValue:{default(s){return s.defaultValue}},modelModifiers:{}}),emits:ne(["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],["update:modelValue"]),setup(s,{expose:p,emit:u}){const n=s,i=u,[o]=ye(s,"modelValue"),h=be(o),c=I(()=>n.pattern?typeof n.pattern=="string"?new RegExp(n.pattern):n.pattern:null),x=F(!1),y=F(!1),d=F(null),m=F(null),l=F(null),v=F(null),P=Se?.CSS?.supports?.("-webkit-touch-callout","none");let B={prev:[l.value?.selectionStart,l.value?.selectionEnd,l.value?.selectionDirection]};function S(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}ae(()=>{const t=l.value,e=v.value;if(!t||!e)return;B.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection??"none"];const a=we(A,"selectionchange",f,{capture:!0});function f(){if(!t)return;if(A?.activeElement!==t){d.value=null,m.value=null;return}const r=t.selectionStart,w=t.selectionEnd,$=t.selectionDirection,j=t.maxLength,H=t.value,D=B.prev;let C=-1,E=-1,R;if(H.length!==0&&r!==null&&w!==null){const ve=r===w,fe=r===H.length&&H.length<j;if(ve&&!fe){const T=r;if(T===0)C=0,E=1,R="forward";else if(T===j)C=T-1,E=T,R="backward";else if(j>1&&H.length>1){let X=0;if(D[0]!==null&&D[1]!==null){R=T<D[1]?"backward":"forward";const ge=D[0]===D[1]&&D[0]<j;R==="backward"&&!ge&&(X=-1)}C=X+T,E=X+T+1}}C!==-1&&E!==-1&&C!==E&&t.setSelectionRange(C,E,R)}const ee=C!==-1?C:r,te=E!==-1?E:w,me=R??$;d.value=ee,m.value=te,B.prev=[ee,te,me]}if(f(),A?.activeElement===t&&(y.value=!0),!A?.getElementById("input-otp-style")){const r=A?.createElement("style");if(r.id="input-otp-style",A?.head.appendChild(r),r.sheet){const w="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";S(r.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),S(r.sheet,`[data-input-otp]:autofill { ${w} }`),S(r.sheet,`[data-input-otp]:-webkit-autofill { ${w} }`),S(r.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),S(r.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}const g=()=>{e&&e.style.setProperty("--root-height",`${t.clientHeight}px`)};g();const k=new ResizeObserver(g);k.observe(t),oe(()=>{a(),k.disconnect()})}),le([o],()=>{Ve(()=>{if(!l.value)return;l.value?.dispatchEvent(new Event("input"));const t=l.value?.selectionStart,e=l.value?.selectionEnd,a=l.value?.selectionDirection;t!==null&&e!==null&&(d.value=t??null,m.value=e??null,B.prev=[t,e,a])})},{immediate:!0}),xe(()=>{h.value!==void 0&&o.value!==h.value&&h.value.length<n.maxlength&&o.value.length===n.maxlength&&i("complete",o.value)});const _=je({containerRef:v,inputRef:l,pushPasswordManagerStrategy:n.pushPasswordManagerStrategy,isFocused:y});function O(t){if(t.inputType==="insertText"&&t.data!==null){const e=t.currentTarget,a=e.selectionStart??0,f=e.selectionEnd??0,g=e.value,k=(a!==f?g.slice(0,a)+t.data+g.slice(f):g.slice(0,a)+t.data+g.slice(a)).slice(0,n.maxlength);k.length>0&&c.value&&!c.value.test(k)&&t.preventDefault()}}function M(t){const e=t.currentTarget.value.slice(0,n.maxlength);if(e.length>0&&c.value&&!c.value.test(e)){t.preventDefault();return}typeof h.value=="string"&&e.length<h.value.length&&A?.dispatchEvent(new Event("selectionchange")),o.value=e,i("input",e)}function q(){const t=l.value;if(t){const e=Math.min(t.value.length,n.maxlength-1),a=t.value.length;t.setSelectionRange(e,a),d.value=e,m.value=a}y.value=!0}function U(t){const e=l.value;if(!e||!n.pasteTransformer&&(!P||!t.clipboardData||!e))return;const a=t?.clipboardData?.getData("text/plain"),f=n?.pasteTransformer?n.pasteTransformer(a):a;t.preventDefault();const g=l.value?.selectionStart,k=l.value?.selectionEnd,r=(g!==k?o.value.slice(0,g)+f+o.value.slice(k):o.value.slice(0,g)+f+o.value.slice(g)).slice(0,n.maxlength);if(r.length>0&&c.value&&!c.value.test(r))return;o.value=r,i("input",r);const w=Math.min(r.length,n.maxlength-1),$=r.length;e?.setSelectionRange(w,$),d.value=w,m.value=$}const ce=Y(N(n,"containerClass","value","pattern","defaultValue","pushPasswordManagerStrategy","noScriptCssFallback","modelValue")),pe=I(()=>({position:"relative",cursor:n.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"})),de=I(()=>({position:"absolute",inset:0,width:_.willPushPWMBadge.value?`calc(100% + ${_.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:_.willPushPWMBadge.value?`inset(0 ${_.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:n.textAlign,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"})),Q=I(()=>({slots:Array.from({length:Number(n.maxlength)}).map((t,e)=>{const a=y.value&&d.value!==null&&m.value!==null&&(d.value===m.value&&e===d.value||e>=d.value&&e<m.value),f=o.value[e]!==void 0?o.value[e]:null;return{char:f,placeholderChar:f??n?.placeholder?.[e]??null,isActive:a,hasFakeCaret:a&&f===null}}),isFocused:y.value,isHovering:!n.disabled&&x.value}));return Pe(ie,Q),p(Object.defineProperty({},"$el",{enumerable:!0,configurable:!0,get:()=>l})),(t,e)=>(V(),G(ke,null,[s.noScriptCssFallback!==null?(V(),se(b(Ie),{key:0,fallback:s.noScriptCssFallback},null,8,["fallback"])):re("v-if",!0),L("div",{ref_key:"containerRef",ref:v,"data-input-otp-container":"",style:_e(pe.value),class:Be(s.containerClass)},[J(t.$slots,"default",{slots:Q.value.slots,isFocused:y.value,isHovering:!s.disabled&&x.value}),L("div",He,[L("input",K({ref_key:"inputRef",ref:l,value:b(o),"data-input-otp":"","data-input-otp-placeholder-shown":b(o).length===0||void 0,"data-input-otp-mss":d.value,"data-input-otp-mse":m.value,"aria-placeholder":s.placeholder,style:de.value,pattern:c.value?.source},{...t.$attrs,...b(ce)},{onBeforeinput:O,onMouseover:e[0]||(e[0]=a=>{x.value=!0,i("mouseover",a)}),onMouseleave:e[1]||(e[1]=a=>{x.value=!1,i("mouseleave",a)}),onPaste:e[2]||(e[2]=a=>{U(a),i("paste",a)}),onInput:M,onFocus:e[3]||(e[3]=a=>{q(),i("focus",a)}),onBlur:e[4]||(e[4]=a=>{y.value=!1,i("blur",a)})}),null,16,ze)])],6)],64))}});var Ge=Le;function Ne(){return Ce(ie)}const Ye=W({__name:"InputOTP",props:{maxlength:{},textAlign:{},inputmode:{},containerClass:{},pushPasswordManagerStrategy:{},noScriptCssFallback:{},defaultValue:{},pasteTransformer:{type:Function},accept:{},alt:{},autocomplete:{},autofocus:{type:Boolean},capture:{type:[Boolean,String]},checked:{type:[Boolean,Array,Set]},crossorigin:{},disabled:{type:Boolean},enterKeyHint:{},form:{},formaction:{},formenctype:{},formmethod:{},formnovalidate:{type:Boolean},formtarget:{},height:{},indeterminate:{type:Boolean},list:{},max:{},min:{},minlength:{},multiple:{type:Boolean},name:{},pattern:{},placeholder:{},readonly:{type:Boolean},required:{type:Boolean},size:{},src:{},step:{},type:{},value:{},width:{},class:{type:[Boolean,null,String,Object,Array]}},emits:["complete","change","select","input","focus","blur","mouseover","mouseleave","paste"],setup(s,{emit:p}){const u=s,n=p,i=N(u,"class"),o=he(i,n);return(h,c)=>(V(),se(b(Ge),K(b(o),{"container-class":b(Z)("flex items-center gap-2 has-disabled:opacity-50",u.class),"data-slot":"input-otp",class:"disabled:cursor-not-allowed"}),{default:Te(x=>[J(h.$slots,"default",Ae(Me(x)))]),_:3},16,["container-class"]))}}),Je=W({__name:"InputOTPGroup",props:{class:{type:[Boolean,null,String,Object,Array]}},setup(s){const p=s,u=N(p,"class"),n=Y(u);return(i,o)=>(V(),G("div",K({"data-slot":"input-otp-group"},b(n),{class:b(Z)("flex items-center",p.class)}),[J(i.$slots,"default")],16))}}),Ke=["data-active"],qe={key:0,class:"pointer-events-none absolute inset-0 flex items-center justify-center"},Ze=W({__name:"InputOTPSlot",props:{index:{},class:{type:[Boolean,null,String,Object,Array]}},setup(s){const p=s,u=N(p,"class"),n=Y(u),i=Ne(),o=I(()=>i?.value.slots[p.index]);return(h,c)=>(V(),G("div",K(b(n),{"data-slot":"input-otp-slot","data-active":o.value?.isActive,class:b(Z)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",p.class)}),[De(Re(o.value?.char)+" ",1),o.value?.hasFakeCaret?(V(),G("div",qe,[...c[0]||(c[0]=[L("div",{class:"animate-caret-blink bg-foreground h-4 w-px duration-1000"},null,-1)])])):re("",!0)],16,Ke))}});export{Ye as _,Je as a,Ze as b};
